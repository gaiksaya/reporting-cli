lib = library(identifier: 'jenkins@test-artifacts-upload', retriever: modernSCM([
    $class: 'GitSCMSource',
    remote: 'https://github.com/gaiksaya/opensearch-build-libraries-1.git',
]))

standardReleasePipelineWithGenericTrigger(
    tokenIdCredential: 'jenkins-reporting-cli-generic-webhook-token',
    causeString: 'A tag was cut on opensearch-project/opensearch-js repository causing this workflow to run',
    downloadReleaseAsset: true,
    publishRelease: true) {
        // publishToNpm(repository: 'https://github.com/opensearch-project/reporting-cli', tag: "$tag")
        publishToArtifactsProdBucket(
            roleName: 'gaiksaya-fork-public-role',
            source: 'reporting-cli/opensearch-reporting-cli-1.1.0.tgz',
            destination: 'reporting-cli/opensearch-reporting-cli-2.0.0-tar.gz',
            signingPlatform: 'pgp',
            sigType: '.sig'
        )
    }
